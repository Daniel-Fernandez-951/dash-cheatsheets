
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>bson – BSON (Binary JSON) Encoding and Decoding — PyMongo 3.11.0 documentation</title>
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/pydoctheme.css" rel="stylesheet" type="text/css"/>
<script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
<script src="../../_static/jquery.js"></script>
<script src="../../_static/underscore.js"></script>
<script src="../../_static/doctools.js"></script>
<script src="../../_static/language_data.js"></script>
<script src="../../_static/delighted.js"></script>
<script src="../../_static/sidebar.js"></script>
<link href="../../genindex.html" rel="index" title="Index"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="binary.html" rel="next" title="binary – Tools for representing binary data to be stored in MongoDB"/>
<link href="../index.html" rel="prev" title="API Documentation"/>
</head><body>
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a accesskey="I" href="../../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="../../py-modindex.html" title="Python Module Index">modules</a> |</li>
<li class="right">
<a accesskey="N" href="binary.html" title="binary – Tools for representing binary data to be stored in MongoDB">next</a> |</li>
<li class="right">
<a accesskey="P" href="../index.html" title="API Documentation">previous</a> |</li>
<li class="nav-item nav-item-0"><a href="../../index.html">PyMongo 3.11.0 documentation</a> »</li>
<li class="nav-item nav-item-1"><a accesskey="U" href="../index.html">API Documentation</a> »</li>
<li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">bson</span></code> – BSON (Binary JSON) Encoding and Decoding</a></li>
</ul>
</div>
<div class="document">
<div class="documentwrapper">
<div class="bodywrapper">
<div class="body" role="main">
<div class="section" id="module-bson">
<span id="bson-bson-binary-json-encoding-and-decoding"></span><h1><a name="//apple_ref/cpp/Module/bson"></a><a class="reference internal" href="#module-bson" title="bson: BSON (Binary JSON) Encoding and Decoding"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bson</span></code></a> – BSON (Binary JSON) Encoding and Decoding<a class="headerlink" href="#module-bson" title="Permalink to this headline">¶</a></h1>
<p>BSON (Binary JSON) encoding and decoding.</p>
<p>The mapping from Python types to BSON types is as follows:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 55%"/>
<col style="width: 18%"/>
<col style="width: 27%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Python Type</p></th>
<th class="head"><p>BSON Type</p></th>
<th class="head"><p>Supported Direction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>None</p></td>
<td><p>null</p></td>
<td><p>both</p></td>
</tr>
<tr class="row-odd"><td><p>bool</p></td>
<td><p>boolean</p></td>
<td><p>both</p></td>
</tr>
<tr class="row-even"><td><p>int <a class="footnote-reference brackets" href="#int" id="id1">1</a></p></td>
<td><p>int32 / int64</p></td>
<td><p>py -&gt; bson</p></td>
</tr>
<tr class="row-odd"><td><p>long</p></td>
<td><p>int64</p></td>
<td><p>py -&gt; bson</p></td>
</tr>
<tr class="row-even"><td><p><cite>bson.int64.Int64</cite></p></td>
<td><p>int64</p></td>
<td><p>both</p></td>
</tr>
<tr class="row-odd"><td><p>float</p></td>
<td><p>number (real)</p></td>
<td><p>both</p></td>
</tr>
<tr class="row-even"><td><p>string</p></td>
<td><p>string</p></td>
<td><p>py -&gt; bson</p></td>
</tr>
<tr class="row-odd"><td><p>unicode</p></td>
<td><p>string</p></td>
<td><p>both</p></td>
</tr>
<tr class="row-even"><td><p>list</p></td>
<td><p>array</p></td>
<td><p>both</p></td>
</tr>
<tr class="row-odd"><td><p>dict / <cite>SON</cite></p></td>
<td><p>object</p></td>
<td><p>both</p></td>
</tr>
<tr class="row-even"><td><p>datetime.datetime <a class="footnote-reference brackets" href="#dt" id="id2">2</a> <a class="footnote-reference brackets" href="#dt2" id="id3">3</a></p></td>
<td><p>date</p></td>
<td><p>both</p></td>
</tr>
<tr class="row-odd"><td><p><cite>bson.regex.Regex</cite></p></td>
<td><p>regex</p></td>
<td><p>both</p></td>
</tr>
<tr class="row-even"><td><p>compiled re <a class="footnote-reference brackets" href="#re" id="id4">4</a></p></td>
<td><p>regex</p></td>
<td><p>py -&gt; bson</p></td>
</tr>
<tr class="row-odd"><td><p><cite>bson.binary.Binary</cite></p></td>
<td><p>binary</p></td>
<td><p>both</p></td>
</tr>
<tr class="row-even"><td><p><cite>bson.objectid.ObjectId</cite></p></td>
<td><p>oid</p></td>
<td><p>both</p></td>
</tr>
<tr class="row-odd"><td><p><cite>bson.dbref.DBRef</cite></p></td>
<td><p>dbref</p></td>
<td><p>both</p></td>
</tr>
<tr class="row-even"><td><p>None</p></td>
<td><p>undefined</p></td>
<td><p>bson -&gt; py</p></td>
</tr>
<tr class="row-odd"><td><p>unicode</p></td>
<td><p>code</p></td>
<td><p>bson -&gt; py</p></td>
</tr>
<tr class="row-even"><td><p><cite>bson.code.Code</cite></p></td>
<td><p>code</p></td>
<td><p>py -&gt; bson</p></td>
</tr>
<tr class="row-odd"><td><p>unicode</p></td>
<td><p>symbol</p></td>
<td><p>bson -&gt; py</p></td>
</tr>
<tr class="row-even"><td><p>bytes (Python 3) <a class="footnote-reference brackets" href="#bytes" id="id5">5</a></p></td>
<td><p>binary</p></td>
<td><p>both</p></td>
</tr>
</tbody>
</table>
<p>Note that, when using Python 2.x, to save binary data it must be wrapped as
an instance of <cite>bson.binary.Binary</cite>. Otherwise it will be saved as a BSON
string and retrieved as unicode. Users of Python 3.x can use the Python bytes
type.</p>
<dl class="footnote brackets">
<dt class="label" id="int"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>A Python int will be saved as a BSON int32 or BSON int64 depending
on its size. A BSON int32 will always decode to a Python int. A BSON
int64 will always decode to a <a class="reference internal" href="int64.html#bson.int64.Int64" title="bson.int64.Int64"><code class="xref py py-class docutils literal notranslate"><span class="pre">Int64</span></code></a>.</p>
</dd>
<dt class="label" id="dt"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>datetime.datetime instances will be rounded to the nearest
millisecond when saved</p>
</dd>
<dt class="label" id="dt2"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p>all datetime.datetime instances are treated as <em>naive</em>. clients
should always use UTC.</p>
</dd>
<dt class="label" id="re"><span class="brackets"><a class="fn-backref" href="#id4">4</a></span></dt>
<dd><p><a class="reference internal" href="regex.html#bson.regex.Regex" title="bson.regex.Regex"><code class="xref py py-class docutils literal notranslate"><span class="pre">Regex</span></code></a> instances and regular expression
objects from <code class="docutils literal notranslate"><span class="pre">re.compile()</span></code> are both saved as BSON regular expressions.
BSON regular expressions are decoded as <a class="reference internal" href="regex.html#bson.regex.Regex" title="bson.regex.Regex"><code class="xref py py-class docutils literal notranslate"><span class="pre">Regex</span></code></a>
instances.</p>
</dd>
<dt class="label" id="bytes"><span class="brackets"><a class="fn-backref" href="#id5">5</a></span></dt>
<dd><p>The bytes type from Python 3.x is encoded as BSON binary with
subtype 0. In Python 3.x it will be decoded back to bytes. In Python 2.x
it will be decoded to an instance of <a class="reference internal" href="binary.html#bson.binary.Binary" title="bson.binary.Binary"><code class="xref py py-class docutils literal notranslate"><span class="pre">Binary</span></code></a> with
subtype 0.</p>
</dd>
</dl>
<dl class="py class">
<dt id="bson.BSON"><a name="//apple_ref/cpp/Class/bson.BSON"></a>
<em class="property">class </em><code class="sig-prename descclassname">bson.</code><code class="sig-name descname">BSON</code><a class="headerlink" href="#bson.BSON" title="Permalink to this definition">¶</a></dt>
<dd><p>BSON (Binary JSON) data.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using this class to encode and decode BSON adds a performance
cost. For better performance use the module level functions
<a class="reference internal" href="#bson.encode" title="bson.encode"><code class="xref py py-func docutils literal notranslate"><span class="pre">encode()</span></code></a> and <a class="reference internal" href="#bson.decode" title="bson.decode"><code class="xref py py-func docutils literal notranslate"><span class="pre">decode()</span></code></a> instead.</p>
</div>
<dl class="py method">
<dt id="bson.BSON.decode"><a name="//apple_ref/cpp/Method/bson.BSON.decode"></a>
<code class="sig-name descname">decode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">codec_options</span><span class="o">=</span><span class="default_value">CodecOptions(document_class=dict, tz_aware=False, uuid_representation=UuidRepresentation.PYTHON_LEGACY, unicode_decode_error_handler='strict', tzinfo=None, type_registry=TypeRegistry(type_codecs=[], fallback_encoder=None))</span></em><span class="sig-paren">)</span><a class="headerlink" href="#bson.BSON.decode" title="Permalink to this definition">¶</a></dt>
<dd><p>Decode this BSON data.</p>
<p>By default, returns a BSON document represented as a Python
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>. To use a different <code class="xref py py-class docutils literal notranslate"><span class="pre">MutableMapping</span></code> class,
configure a <a class="reference internal" href="codec_options.html#bson.codec_options.CodecOptions" title="bson.codec_options.CodecOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">CodecOptions</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">collections</span>  <span class="c1"># From Python standard library.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">bson</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bson.codec_options</span> <span class="kn">import</span> <span class="n">CodecOptions</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">bson</span><span class="o">.</span><span class="n">BSON</span><span class="o">.</span><span class="n">encode</span><span class="p">({</span><span class="s1">'a'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decoded_doc</span> <span class="o">=</span> <span class="n">bson</span><span class="o">.</span><span class="n">BSON</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
<span class="go">&lt;type 'dict'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">options</span> <span class="o">=</span> <span class="n">CodecOptions</span><span class="p">(</span><span class="n">document_class</span><span class="o">=</span><span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decoded_doc</span> <span class="o">=</span> <span class="n">bson</span><span class="o">.</span><span class="n">BSON</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">codec_options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">decoded_doc</span><span class="p">)</span>
<span class="go">&lt;class 'collections.OrderedDict'&gt;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><cite>codec_options</cite> (optional): An instance of
<a class="reference internal" href="codec_options.html#bson.codec_options.CodecOptions" title="bson.codec_options.CodecOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">CodecOptions</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.0: </span>Removed <cite>compile_re</cite> option: PyMongo now always represents BSON
regular expressions as <a class="reference internal" href="regex.html#bson.regex.Regex" title="bson.regex.Regex"><code class="xref py py-class docutils literal notranslate"><span class="pre">Regex</span></code></a> objects. Use
<a class="reference internal" href="regex.html#bson.regex.Regex.try_compile" title="bson.regex.Regex.try_compile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">try_compile()</span></code></a> to attempt to convert from a
BSON regular expression to a Python regular expression object.</p>
<p>Replaced <cite>as_class</cite>, <cite>tz_aware</cite>, and <cite>uuid_subtype</cite> options with
<cite>codec_options</cite>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.7: </span>Added <cite>compile_re</cite> option. If set to False, PyMongo represented BSON
regular expressions as <a class="reference internal" href="regex.html#bson.regex.Regex" title="bson.regex.Regex"><code class="xref py py-class docutils literal notranslate"><span class="pre">Regex</span></code></a> objects instead of
attempting to compile BSON regular expressions as Python native
regular expressions, thus preventing errors for some incompatible
patterns, see <a class="reference external" href="https://jira.mongodb.org/browse/PYTHON-500">PYTHON-500</a>.</p>
</div>
</dd></dl>
<dl class="py method">
<dt id="bson.BSON.encode"><a name="//apple_ref/cpp/Method/bson.BSON.encode"></a>
<em class="property">classmethod </em><code class="sig-name descname">encode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">document</span></em>, <em class="sig-param"><span class="n">check_keys</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">codec_options</span><span class="o">=</span><span class="default_value">CodecOptions(document_class=dict, tz_aware=False, uuid_representation=UuidRepresentation.PYTHON_LEGACY, unicode_decode_error_handler='strict', tzinfo=None, type_registry=TypeRegistry(type_codecs=[], fallback_encoder=None))</span></em><span class="sig-paren">)</span><a class="headerlink" href="#bson.BSON.encode" title="Permalink to this definition">¶</a></dt>
<dd><p>Encode a document to a new <a class="reference internal" href="#bson.BSON" title="bson.BSON"><code class="xref py py-class docutils literal notranslate"><span class="pre">BSON</span></code></a> instance.</p>
<p>A document can be any mapping type (like <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>).</p>
<p>Raises <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></a> if <cite>document</cite> is not a mapping type,
or contains keys that are not instances of
<code class="xref py py-class docutils literal notranslate"><span class="pre">basestring</span></code> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> in python 3). Raises
<a class="reference internal" href="errors.html#bson.errors.InvalidDocument" title="bson.errors.InvalidDocument"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidDocument</span></code></a> if <cite>document</cite> cannot be
converted to <a class="reference internal" href="#bson.BSON" title="bson.BSON"><code class="xref py py-class docutils literal notranslate"><span class="pre">BSON</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><cite>document</cite>: mapping type representing a document</p></li>
<li><p><cite>check_keys</cite> (optional): check if keys start with ‘$’ or
contain ‘.’, raising <a class="reference internal" href="errors.html#bson.errors.InvalidDocument" title="bson.errors.InvalidDocument"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidDocument</span></code></a> in
either case</p></li>
<li><p><cite>codec_options</cite> (optional): An instance of
<a class="reference internal" href="codec_options.html#bson.codec_options.CodecOptions" title="bson.codec_options.CodecOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">CodecOptions</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.0: </span>Replaced <cite>uuid_subtype</cite> option with <cite>codec_options</cite>.</p>
</div>
</dd></dl>
</dd></dl>
<dl class="py function">
<dt id="bson.decode"><a name="//apple_ref/cpp/Function/bson.decode"></a>
<code class="sig-prename descclassname">bson.</code><code class="sig-name descname">decode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">codec_options</span><span class="o">=</span><span class="default_value">CodecOptions(document_class=dict, tz_aware=False, uuid_representation=UuidRepresentation.PYTHON_LEGACY, unicode_decode_error_handler='strict', tzinfo=None, type_registry=TypeRegistry(type_codecs=[], fallback_encoder=None))</span></em><span class="sig-paren">)</span><a class="headerlink" href="#bson.decode" title="Permalink to this definition">¶</a></dt>
<dd><p>Decode BSON to a document.</p>
<p>By default, returns a BSON document represented as a Python
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>. To use a different <code class="xref py py-class docutils literal notranslate"><span class="pre">MutableMapping</span></code> class,
configure a <a class="reference internal" href="codec_options.html#bson.codec_options.CodecOptions" title="bson.codec_options.CodecOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">CodecOptions</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">collections</span>  <span class="c1"># From Python standard library.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">bson</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bson.codec_options</span> <span class="kn">import</span> <span class="n">CodecOptions</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">bson</span><span class="o">.</span><span class="n">encode</span><span class="p">({</span><span class="s1">'a'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decoded_doc</span> <span class="o">=</span> <span class="n">bson</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">&lt;type 'dict'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">options</span> <span class="o">=</span> <span class="n">CodecOptions</span><span class="p">(</span><span class="n">document_class</span><span class="o">=</span><span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decoded_doc</span> <span class="o">=</span> <span class="n">bson</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">codec_options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">decoded_doc</span><span class="p">)</span>
<span class="go">&lt;class 'collections.OrderedDict'&gt;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><cite>data</cite>: the BSON to decode. Any bytes-like object that implements
the buffer protocol.</p></li>
<li><p><cite>codec_options</cite> (optional): An instance of
<a class="reference internal" href="codec_options.html#bson.codec_options.CodecOptions" title="bson.codec_options.CodecOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">CodecOptions</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.9.</span></p>
</div>
</dd></dl>
<dl class="py function">
<dt id="bson.decode_file_iter"><a name="//apple_ref/cpp/Function/bson.decode_file_iter"></a>
<code class="sig-prename descclassname">bson.</code><code class="sig-name descname">decode_file_iter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_obj</span></em>, <em class="sig-param"><span class="n">codec_options</span><span class="o">=</span><span class="default_value">CodecOptions(document_class=dict, tz_aware=False, uuid_representation=UuidRepresentation.PYTHON_LEGACY, unicode_decode_error_handler='strict', tzinfo=None, type_registry=TypeRegistry(type_codecs=[], fallback_encoder=None))</span></em><span class="sig-paren">)</span><a class="headerlink" href="#bson.decode_file_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Decode bson data from a file to multiple documents as a generator.</p>
<p>Works similarly to the decode_all function, but reads from the file object
in chunks and parses bson in chunks, yielding one document at a time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><cite>file_obj</cite>: A file object containing BSON data.</p></li>
<li><p><cite>codec_options</cite> (optional): An instance of
<a class="reference internal" href="codec_options.html#bson.codec_options.CodecOptions" title="bson.codec_options.CodecOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">CodecOptions</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.0: </span>Replaced <cite>as_class</cite>, <cite>tz_aware</cite>, and <cite>uuid_subtype</cite> options with
<cite>codec_options</cite>.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.8.</span></p>
</div>
</dd></dl>
<dl class="py function">
<dt id="bson.decode_iter"><a name="//apple_ref/cpp/Function/bson.decode_iter"></a>
<code class="sig-prename descclassname">bson.</code><code class="sig-name descname">decode_iter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">codec_options</span><span class="o">=</span><span class="default_value">CodecOptions(document_class=dict, tz_aware=False, uuid_representation=UuidRepresentation.PYTHON_LEGACY, unicode_decode_error_handler='strict', tzinfo=None, type_registry=TypeRegistry(type_codecs=[], fallback_encoder=None))</span></em><span class="sig-paren">)</span><a class="headerlink" href="#bson.decode_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Decode BSON data to multiple documents as a generator.</p>
<p>Works similarly to the decode_all function, but yields one document at a
time.</p>
<p><cite>data</cite> must be a string of concatenated, valid, BSON-encoded
documents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><cite>data</cite>: BSON data</p></li>
<li><p><cite>codec_options</cite> (optional): An instance of
<a class="reference internal" href="codec_options.html#bson.codec_options.CodecOptions" title="bson.codec_options.CodecOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">CodecOptions</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.0: </span>Replaced <cite>as_class</cite>, <cite>tz_aware</cite>, and <cite>uuid_subtype</cite> options with
<cite>codec_options</cite>.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.8.</span></p>
</div>
</dd></dl>
<dl class="py function">
<dt id="bson.encode"><a name="//apple_ref/cpp/Function/bson.encode"></a>
<code class="sig-prename descclassname">bson.</code><code class="sig-name descname">encode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">document</span></em>, <em class="sig-param"><span class="n">check_keys</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">codec_options</span><span class="o">=</span><span class="default_value">CodecOptions(document_class=dict, tz_aware=False, uuid_representation=UuidRepresentation.PYTHON_LEGACY, unicode_decode_error_handler='strict', tzinfo=None, type_registry=TypeRegistry(type_codecs=[], fallback_encoder=None))</span></em><span class="sig-paren">)</span><a class="headerlink" href="#bson.encode" title="Permalink to this definition">¶</a></dt>
<dd><p>Encode a document to BSON.</p>
<p>A document can be any mapping type (like <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>).</p>
<p>Raises <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></a> if <cite>document</cite> is not a mapping type,
or contains keys that are not instances of
<code class="xref py py-class docutils literal notranslate"><span class="pre">basestring</span></code> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> in python 3). Raises
<a class="reference internal" href="errors.html#bson.errors.InvalidDocument" title="bson.errors.InvalidDocument"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidDocument</span></code></a> if <cite>document</cite> cannot be
converted to <a class="reference internal" href="#bson.BSON" title="bson.BSON"><code class="xref py py-class docutils literal notranslate"><span class="pre">BSON</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><cite>document</cite>: mapping type representing a document</p></li>
<li><p><cite>check_keys</cite> (optional): check if keys start with ‘$’ or
contain ‘.’, raising <a class="reference internal" href="errors.html#bson.errors.InvalidDocument" title="bson.errors.InvalidDocument"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidDocument</span></code></a> in
either case</p></li>
<li><p><cite>codec_options</cite> (optional): An instance of
<a class="reference internal" href="codec_options.html#bson.codec_options.CodecOptions" title="bson.codec_options.CodecOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">CodecOptions</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.9.</span></p>
</div>
</dd></dl>
<dl class="py function">
<dt id="bson.gen_list_name"><a name="//apple_ref/cpp/Function/bson.gen_list_name"></a>
<code class="sig-prename descclassname">bson.</code><code class="sig-name descname">gen_list_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bson.gen_list_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate “keys” for encoded lists in the sequence
b”0", b”1", b”2", …</p>
<p>The first 1000 keys are returned from a pre-built cache. All
subsequent keys are generated on the fly.</p>
</dd></dl>
<dl class="py function">
<dt id="bson.has_c"><a name="//apple_ref/cpp/Function/bson.has_c"></a>
<code class="sig-prename descclassname">bson.</code><code class="sig-name descname">has_c</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bson.has_c" title="Permalink to this definition">¶</a></dt>
<dd><p>Is the C extension installed?</p>
</dd></dl>
<dl class="py function">
<dt id="bson.is_valid"><a name="//apple_ref/cpp/Function/bson.is_valid"></a>
<code class="sig-prename descclassname">bson.</code><code class="sig-name descname">is_valid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bson</span></em><span class="sig-paren">)</span><a class="headerlink" href="#bson.is_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the given string represents valid <a class="reference internal" href="#bson.BSON" title="bson.BSON"><code class="xref py py-class docutils literal notranslate"><span class="pre">BSON</span></code></a> data.</p>
<p>Raises <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></a> if <cite>bson</cite> is not an instance of
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> in python 3). Returns <code class="docutils literal notranslate"><span class="pre">True</span></code>
if <cite>bson</cite> is valid <a class="reference internal" href="#bson.BSON" title="bson.BSON"><code class="xref py py-class docutils literal notranslate"><span class="pre">BSON</span></code></a>, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><cite>bson</cite>: the data to be validated</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<p>Sub-modules:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="binary.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">binary</span></code> – Tools for representing binary data to be stored in MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="code.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">code</span></code> – Tools for representing JavaScript code</a></li>
<li class="toctree-l1"><a class="reference internal" href="codec_options.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">codec_options</span></code> – Tools for specifying BSON codec options</a></li>
<li class="toctree-l1"><a class="reference internal" href="dbref.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dbref</span></code> – Tools for manipulating DBRefs (references to documents stored in MongoDB)</a></li>
<li class="toctree-l1"><a class="reference internal" href="decimal128.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">decimal128</span></code> – Support for BSON Decimal128</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">errors</span></code> – Exceptions raised by the <code class="xref py py-mod docutils literal notranslate"><span class="pre">bson</span></code> package</a></li>
<li class="toctree-l1"><a class="reference internal" href="int64.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">int64</span></code> – Tools for representing BSON int64</a></li>
<li class="toctree-l1"><a class="reference internal" href="json_util.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">json_util</span></code> – Tools for using Python’s <code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code> module with BSON documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="max_key.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">max_key</span></code> – Representation for the MongoDB internal MaxKey type</a></li>
<li class="toctree-l1"><a class="reference internal" href="min_key.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">min_key</span></code> – Representation for the MongoDB internal MinKey type</a></li>
<li class="toctree-l1"><a class="reference internal" href="objectid.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">objectid</span></code> – Tools for working with MongoDB ObjectIds</a></li>
<li class="toctree-l1"><a class="reference internal" href="raw_bson.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">raw_bson</span></code> – Tools for representing raw BSON documents.</a></li>
<li class="toctree-l1"><a class="reference internal" href="regex.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">regex</span></code> – Tools for representing MongoDB regular expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="son.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">son</span></code> – Tools for working with SON, an ordered mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="timestamp.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">timestamp</span></code> – Tools for representing MongoDB internal Timestamps</a></li>
<li class="toctree-l1"><a class="reference internal" href="tz_util.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tz_util</span></code> – Utilities for dealing with timezones in Python</a></li>
</ul>
</div>
</div>
<div class="clearer"></div>
</div>
</div>
</div>
<div aria-label="main navigation" class="sphinxsidebar" role="navigation">
<div class="sphinxsidebarwrapper">
<h4>Previous topic</h4>
<p class="topless"><a href="../index.html" title="previous chapter">API Documentation</a></p>
<h4>Next topic</h4>
<p class="topless"><a href="binary.html" title="next chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">binary</span></code> – Tools for representing binary data to be stored in MongoDB</a></p>
<div aria-label="source link" role="note">
<h3>This Page</h3>
<ul class="this-page-menu">
<li><a href="../../_sources/api/bson/index.rst.txt" rel="nofollow">Show Source</a></li>
</ul>
</div>
<div id="searchbox" role="search" style="display: none">
<h3 id="searchlabel">Quick search</h3>
<div class="searchformwrapper">
<form action="../../search.html" class="search" method="get">
<input aria-labelledby="searchlabel" name="q" type="text"/>
<input type="submit" value="Go"/>
</form>
</div>
</div>
<script>$('#searchbox').show(0);</script>
</div>
</div>
<div class="clearer"></div>
</div>
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a href="../../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="../../py-modindex.html" title="Python Module Index">modules</a> |</li>
<li class="right">
<a href="binary.html" title="binary – Tools for representing binary data to be stored in MongoDB">next</a> |</li>
<li class="right">
<a href="../index.html" title="API Documentation">previous</a> |</li>
<li class="nav-item nav-item-0"><a href="../../index.html">PyMongo 3.11.0 documentation</a> »</li>
<li class="nav-item nav-item-1"><a href="../index.html">API Documentation</a> »</li>
<li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">bson</span></code> – BSON (Binary JSON) Encoding and Decoding</a></li>
</ul>
</div>
<div class="footer" role="contentinfo">
        © Copyright MongoDB, Inc. 2008-present. MongoDB, Mongo, and the leaf logo are registered trademarks of MongoDB, Inc.
    </div>
</body>
</html>